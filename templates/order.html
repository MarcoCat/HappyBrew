{% extends "base.html" %}

{% block content %}
<main>
    <h1>Menu</h1>
    <form id="order-form" method="POST">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        <br /><br />
        <label for="address">Address:</label>
        <input type="text" id="address" name="address" required>
        <br /><br />
        <div id="order-items">
            <div class="order-item">
                <label for="item-0">Item:</label>
                <select id="item-0" name="products[0][name]">
                    {% for category, items in menu.items() %}
                        {% for item in items %}
                            <option value="{{ item['name'] }}">{{ item['name'] }} - ${{ item['price'] }}</option>
                        {% endfor %}
                    {% endfor %}
                </select>
                <br /><br />
                <label for="quantity-0">Quantity:</label>
                <input type="number" id="quantity-0" name="products[0][quantity]" min="1" value="1" />
                <br /><br />
            </div>
        </div>
        <button id="add-item-button" type="button">Add Item</button>
        <br /><br />
        <input type="submit" value="Order" />
    </form>
</main>

<script>
    let orderItemsCount = 1;
    const orderItems = document.getElementById('order-items');
    const addItemButton = document.getElementById('add-item-button');
    addItemButton.addEventListener('click', () => {
        const orderItem = document.createElement('div');
        orderItem.classList.add('order-item');
        orderItem.innerHTML = `
            <label for="item-${orderItemsCount}">Item:</label>
            <select id="item-${orderItemsCount}" name="products[${orderItemsCount}][name]">
                {% for category, items in menu.items() %}
                    {% for item in items %}
                        <option value="{{ item['name'] }}">{{ item['name'] }} - ${{ item['price'] }}</option>
                    {% endfor %}
                {% endfor %}
            </select>
            <br /><br />
            <label for="quantity-${orderItemsCount}">Quantity:</label>
            <input type="number" id="quantity-${orderItemsCount}" name="products[${orderItemsCount}][quantity]" min="1" value="1" />
            <br /><br />
        `;
        orderItems.appendChild(orderItem);
        orderItemsCount++;
    });
</script>
{% endblock %}
